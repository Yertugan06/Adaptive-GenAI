<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Chat - Adaptive GenAI</title>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100">
  <header class="border-b border-slate-800 bg-slate-950/80 backdrop-blur sticky top-0 z-10">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="font-semibold">Adaptive GenAI</div>

      <nav class="flex items-center gap-3 text-sm">
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./chat.html">Chat</a>
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./feedback.html">Feedback</a>
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./memory.html">Memory</a>
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./analytics.html">Analytics</a>
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./admin.html">Admin</a>
        <a class="text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-slate-800" href="./profile.html">Profile</a>
      </nav>

      <div class="flex items-center gap-3">
        <span id="userBadge" class="text-sm text-slate-300"></span>
        <button id="logoutBtn" class="text-sm px-3 py-1 rounded-lg border border-slate-700 hover:border-slate-500 hover:bg-slate-800">
          Logout
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-3xl mx-auto px-4 py-6 space-y-4">
    <!-- Banner for messages -->
    <div id="banner" class="hidden p-4 rounded-xl border"></div>

    <!-- Chat messages container -->
    <section id="chat" class="space-y-4 min-h-[60vh]">
      <!-- Initial welcome message -->
      <div class="p-4 rounded-2xl border border-slate-800 bg-slate-900">
        <div class="flex items-center justify-between mb-2">
          <div class="font-semibold">AI Assistant</div>
          <div class="text-xs text-slate-400">system</div>
        </div>
        <div class="whitespace-pre-wrap">Welcome! Ask me anything about your company's knowledge base. Remember to provide feedback on responses to help me improve.</div>
      </div>
    </section>

    <!-- Feedback widget -->
    <section id="feedbackBox" class="hidden p-4 rounded-2xl border border-slate-800 bg-slate-900">
      <div class="flex items-center justify-between mb-3">
        <h2 class="font-semibold">Feedback Required</h2>
        <span id="fbTarget" class="text-xs text-slate-400"></span>
      </div>

      <div class="flex items-center gap-2 mb-3">
        <label class="text-sm text-slate-300">Rating:</label>
        <select id="rating" class="bg-slate-950 border border-slate-800 rounded-lg px-2 py-1">
          <option value="5">5 - Excellent</option>
          <option value="4">4 - Good</option>
          <option value="3">3 - Average</option>
          <option value="2">2 - Poor</option>
          <option value="1">1 - Bad</option>
        </select>
      </div>

      <button id="sendFeedbackBtn"
        class="w-full px-4 py-2 rounded-lg bg-slate-100 text-slate-950 font-semibold hover:opacity-90">
        Submit Feedback
      </button>

      <div id="fbError" class="hidden mt-2 p-2 text-sm text-red-300 bg-red-900/30 rounded"></div>
    </section>

    <!-- Prompt input -->
    <section class="sticky bottom-6 p-4 rounded-2xl border border-slate-800 bg-slate-900 shadow-xl">
      <div class="flex gap-2">
        <input 
          id="promptInput" 
          type="text" 
          placeholder="Type your question here..." 
          class="flex-1 rounded-lg bg-slate-950 border border-slate-800 px-3 py-2 outline-none focus:border-slate-600"
          autocomplete="off"
        />
        <button 
          id="sendPromptBtn"
          class="px-4 py-2 rounded-lg bg-slate-100 text-slate-950 font-semibold hover:opacity-90"
        >
          Send
        </button>
      </div>
      <div class="mt-2 text-xs text-slate-400">
        <span class="font-medium">Note:</span> You must submit feedback on each response before sending a new prompt.
      </div>
    </section>
  </main>

  <script type="module" src="../assets/js/chat.js"></script>
</body>
</html>